import datetime
from mst_gateway.connector.api.types import OrderExec, OrderSchema, OrderType, OrderTTL, BUY, SELL, PositionSide

DEFAULT_ORDER_SIDE = BUY
DEFAULT_ORDER_OPPOSITE_SIDE = SELL
DEFAULT_ORDER_POSITION_SIDE = PositionSide.both
DEFAULT_ORDER_VOLUME = {
    OrderSchema.exchange: 0.001,
    OrderSchema.margin: 0.001,
    OrderSchema.margin_coin: 1.0,
}
DEFAULT_ORDER_OPTIONS = {
    'ttl': OrderTTL.GTC,
    'is_passive': False,
    'is_iceberg': False,
    'iceberg_volume': None,
    'comments': '',
}
DEFAULT_ORDER = {
    OrderSchema.exchange: {
        'active': False,
        'execution': OrderExec.limit,
        'filled_volume': 0.0,
        'schema': OrderSchema.exchange,
        'side': DEFAULT_ORDER_SIDE,
        'position_side': PositionSide.both,
        'stop': 0.0,
        'symbol': 'BTCUSDT',
        'system_symbol': 'btcusdt',
        'type': OrderType.limit,
        'volume': DEFAULT_ORDER_VOLUME[OrderSchema.exchange],
        'ttl': OrderTTL.GTC,
        'is_iceberg': False,
        'iceberg_volume': 0.0,
        'is_passive': False,
        'comments': None
    },
    OrderSchema.margin: {
        'active': False,
        'execution': OrderExec.limit,
        'filled_volume': 0.0,
        'schema': OrderSchema.margin,
        'side': DEFAULT_ORDER_SIDE,
        'position_side': PositionSide.both,
        'stop': 0.0,
        'symbol': 'BTCUSDT',
        'system_symbol': 'btcusdt',
        'type': OrderType.limit,
        'volume': DEFAULT_ORDER_VOLUME[OrderSchema.margin],
        'ttl': OrderTTL.GTC,
        'is_iceberg': False,
        'iceberg_volume': 0.0,
        'is_passive': False,
        'comments': None
    },
    OrderSchema.margin_coin: {
        'active': False,
        'execution': OrderExec.limit,
        'filled_volume': 0.0,
        'schema': OrderSchema.margin_coin,
        'side': DEFAULT_ORDER_SIDE,
        'position_side': PositionSide.both,
        'stop': 0.0,
        'symbol': 'BTCUSD_PERP',
        'system_symbol': 'btcusd',
        'type': OrderType.limit,
        'volume': DEFAULT_ORDER_VOLUME[OrderSchema.margin_coin],
        'ttl': OrderTTL.GTC,
        'is_iceberg': False,
        'iceberg_volume': 0.0,
        'is_passive': False,
        'comments': None
    },
}


DEFAULT_ORDER_MESSAGE = {
    OrderSchema.exchange: {
        'e': 'executionReport',
        'E': 1639057750403,
        's': 'BTCUSDT',
        'c': 'VuuQ6CA63KWGl7Qyq9GFCR',
        'S': 'BUY',
        'o': 'LIMIT',
        'f': 'GTC',
        'q': '0.00100000',
        'p': '49200.00000000',
        'P': '0.00000000',
        'F': '0.00000000',
        'g': -1,
        'C': '',
        'x': 'NEW',
        'X': 'NEW',
        'r': 'NONE',
        'i': 2352852,
        'l': '0.00000000',
        'z': '0.00000000',
        'L': '0.00000000',
        'n': '0',
        'N': None,
        'T': 1639057750402,
        't': -1,
        'I': 5210446,
        'w': True,
        'm': False,
        'M': False,
        'O': 1639057750402,
        'Z': '0.00000000',
        'Y': '0.00000000',
        'Q': '0.00000000',
    },
    OrderSchema.margin: {
        'e': 'ORDER_TRADE_UPDATE',
        'T': 1639058196458,
        'E': 1639058196460,
        'o': {
            's': 'BTCUSDT',
            'c': 'web_PqSHEF5jz9kgqy9Ql82X',
            'S': 'BUY',
            'o': 'LIMIT',
            'f': 'GTC',
            'q': '0.001',
            'p': '49328.01',
            'ap': '0',
            'sp': '0',
            'x': 'NEW',
            'X': 'NEW',
            'i': 2939862341,
            'l': '0',
            'z': '0',
            'L': '0',
            'T': 1639058196458,
            't': 0,
            'b': '0',
            'a': '0',
            'm': False,
            'R': False,
            'wt': 'CONTRACT_PRICE',
            'ot': 'LIMIT',
            'ps': 'BOTH',
            'cp': False,
            'rp': '0',
            'pP': False,
            'si': 0,
            'ss': 0,
        },
    },
    OrderSchema.margin_coin: {
        'e': 'ORDER_TRADE_UPDATE',
        'T': 1639058394216,
        'E': 1639058394219,
        'i': 'SgsRoCSgAusR',
        'o': {
            's': 'BTCUSD_PERP',
            'c': 'web_UPJWJK4WYHUUQepbVPFl',
            'S': 'BUY',
            'o': 'LIMIT',
            'f': 'GTC',
            'q': '1',
            'p': '49400.8',
            'ap': '0',
            'sp': '0',
            'x': 'NEW',
            'X': 'NEW',
            'i': 229157580,
            'l': '0',
            'z': '0',
            'L': '0',
            'T': 1639058394216,
            't': 0,
            'b': '0',
            'a': '0',
            'm': False,
            'R': False,
            'wt': 'CONTRACT_PRICE',
            'ot': 'LIMIT',
            'ps': 'BOTH',
            'cp': False,
            'ma': 'BTC',
            'rp': '0',
            'pP': False,
            'si': 0,
            'ss': 0,
        },
    },
}
DEFAULT_ORDER_LOOKUP_TABLE_RESULT = {
    OrderSchema.exchange: {
        'table': 'executionReport',
        'action': 'update',
        'data': [
            {
                'e': 'executionReport',
                'E': 1639057750403,
                's': 'BTCUSDT',
                'c': 'VuuQ6CA63KWGl7Qyq9GFCR',
                'S': 'BUY',
                'o': 'LIMIT',
                'f': 'GTC',
                'q': '0.00100000',
                'p': '49200.00000000',
                'P': '0.00000000',
                'F': '0.00000000',
                'g': -1,
                'C': '',
                'x': 'NEW',
                'X': 'NEW',
                'r': 'NONE',
                'i': 2352852,
                'l': '0.00000000',
                'z': '0.00000000',
                'L': '0.00000000',
                'n': '0',
                'N': None,
                'T': 1639057750402,
                't': -1,
                'I': 5210446,
                'w': True,
                'm': False,
                'M': False,
                'O': 1639057750402,
                'Z': '0.00000000',
                'Y': '0.00000000',
                'Q': '0.00000000',
            }
        ],
    },
    OrderSchema.margin: {
        'table': 'ORDER_TRADE_UPDATE',
        'action': 'update',
        'data': [
            {
                'e': 'ORDER_TRADE_UPDATE',
                'T': 1639058196458,
                'E': 1639058196460,
                'o': {
                    's': 'BTCUSDT',
                    'c': 'web_PqSHEF5jz9kgqy9Ql82X',
                    'S': 'BUY',
                    'o': 'LIMIT',
                    'f': 'GTC',
                    'q': '0.001',
                    'p': '49328.01',
                    'ap': '0',
                    'sp': '0',
                    'x': 'NEW',
                    'X': 'NEW',
                    'i': 2939862341,
                    'l': '0',
                    'z': '0',
                    'L': '0',
                    'T': 1639058196458,
                    't': 0,
                    'b': '0',
                    'a': '0',
                    'm': False,
                    'R': False,
                    'wt': 'CONTRACT_PRICE',
                    'ot': 'LIMIT',
                    'ps': 'BOTH',
                    'cp': False,
                    'rp': '0',
                    'pP': False,
                    'si': 0,
                    'ss': 0,
                },
            }
        ],
    },
    OrderSchema.margin_coin: {
        'table': 'ORDER_TRADE_UPDATE',
        'action': 'update',
        'data': [
            {
                'e': 'ORDER_TRADE_UPDATE',
                'T': 1639058394216,
                'E': 1639058394219,
                'i': 'SgsRoCSgAusR',
                'o': {
                    's': 'BTCUSD_PERP',
                    'c': 'web_UPJWJK4WYHUUQepbVPFl',
                    'S': 'BUY',
                    'o': 'LIMIT',
                    'f': 'GTC',
                    'q': '1',
                    'p': '49400.8',
                    'ap': '0',
                    'sp': '0',
                    'x': 'NEW',
                    'X': 'NEW',
                    'i': 229157580,
                    'l': '0',
                    'z': '0',
                    'L': '0',
                    'T': 1639058394216,
                    't': 0,
                    'b': '0',
                    'a': '0',
                    'm': False,
                    'R': False,
                    'wt': 'CONTRACT_PRICE',
                    'ot': 'LIMIT',
                    'ps': 'BOTH',
                    'cp': False,
                    'ma': 'BTC',
                    'rp': '0',
                    'pP': False,
                    'si': 0,
                    'ss': 0,
                },
            }
        ],
    },
}
DEFAULT_ORDER_SPLIT_MESSAGE_RESULT = {
    OrderSchema.exchange: [
        {
            'table': 'executionReport',
            'action': 'insert',
            'data': [
                {
                    'e': 'executionReport',
                    'E': 1639057750403,
                    's': 'BTCUSDT',
                    'c': 'VuuQ6CA63KWGl7Qyq9GFCR',
                    'S': 'BUY',
                    'o': 'LIMIT',
                    'f': 'GTC',
                    'q': '0.00100000',
                    'p': '49200.00000000',
                    'P': '0.00000000',
                    'F': '0.00000000',
                    'g': -1,
                    'C': '',
                    'x': 'NEW',
                    'X': 'NEW',
                    'r': 'NONE',
                    'i': 2352852,
                    'l': '0.00000000',
                    'z': '0.00000000',
                    'L': '0.00000000',
                    'n': '0',
                    'N': None,
                    'T': 1639057750402,
                    't': -1,
                    'I': 5210446,
                    'w': True,
                    'm': False,
                    'M': False,
                    'O': 1639057750402,
                    'Z': '0.00000000',
                    'Y': '0.00000000',
                    'Q': '0.00000000',
                }
            ],
        }
    ],
    OrderSchema.margin: [
        {
            'table': 'ORDER_TRADE_UPDATE',
            'action': 'insert',
            'data': [
                {
                    'e': 'ORDER_TRADE_UPDATE',
                    'T': 1639058196458,
                    'E': 1639058196460,
                    's': 'BTCUSDT',
                    'c': 'web_PqSHEF5jz9kgqy9Ql82X',
                    'S': 'BUY',
                    'o': 'LIMIT',
                    'f': 'GTC',
                    'q': '0.001',
                    'p': '49328.01',
                    'ap': '0',
                    'sp': '0',
                    'x': 'NEW',
                    'X': 'NEW',
                    'i': 2939862341,
                    'l': '0',
                    'z': '0',
                    'L': '0',
                    't': 0,
                    'b': '0',
                    'a': '0',
                    'm': False,
                    'R': False,
                    'wt': 'CONTRACT_PRICE',
                    'ot': 'LIMIT',
                    'ps': 'BOTH',
                    'cp': False,
                    'rp': '0',
                    'pP': False,
                    'si': 0,
                    'ss': 0,
                }
            ],
        }
    ],
    OrderSchema.margin_coin: [
        {
            'table': 'ORDER_TRADE_UPDATE',
            'action': 'insert',
            'data': [
                {
                    'e': 'ORDER_TRADE_UPDATE',
                    'T': 1639058394216,
                    'E': 1639058394219,
                    'i': 229157580,
                    's': 'BTCUSD_PERP',
                    'c': 'web_UPJWJK4WYHUUQepbVPFl',
                    'S': 'BUY',
                    'o': 'LIMIT',
                    'f': 'GTC',
                    'q': '1',
                    'p': '49400.8',
                    'ap': '0',
                    'sp': '0',
                    'x': 'NEW',
                    'X': 'NEW',
                    'l': '0',
                    'z': '0',
                    'L': '0',
                    't': 0,
                    'b': '0',
                    'a': '0',
                    'm': False,
                    'R': False,
                    'wt': 'CONTRACT_PRICE',
                    'ot': 'LIMIT',
                    'ps': 'BOTH',
                    'cp': False,
                    'ma': 'BTC',
                    'rp': '0',
                    'pP': False,
                    'si': 0,
                    'ss': 0,
                }
            ],
        }
    ],
}
DEFAULT_ORDER_GET_DATA_RESULT = {
    OrderSchema.exchange: [
        {
            'order': {
                'acc': 'tbinance.tbinance_spot',
                'tb': 'order',
                'sch': 'exchange',
                'act': 'insert',
                'd': [
                    {
                        'eoid': '2352852',
                        'sd': 0,
                        'ps': PositionSide.both,
                        'tv': 0.0,
                        'tp': 0.0,
                        'vl': 0.001,
                        'p': 49200.0,
                        'st': 'pending',
                        'lv': 0.001,
                        'fv': 0.0,
                        'ap': 0.0,
                        'tm': '2021-12-09T13:49:10.403000',
                        's': 'BTCUSDT',
                        'stp': 0.0,
                        'crt': '2021-12-09T13:49:10.402000',
                        't': 'limit',
                        'exc': 'limit',
                        'ss': 'btcusdt',
                    }
                ],
            }
        }
    ],
    OrderSchema.margin: [
        {
            'order': {
                'acc': 'tbinance.tbinance_margin',
                'tb': 'order',
                'sch': OrderSchema.margin,
                'act': 'insert',
                'd': [
                    {
                        'eoid': '2939862341',
                        'sd': 0,
                        'ps': PositionSide.both,
                        'tv': 0.0,
                        'tp': 0.0,
                        'vl': 0.001,
                        'p': 49328.01,
                        'st': 'pending',
                        'lv': 0.001,
                        'fv': 0.0,
                        'ap': 0.0,
                        'tm': '2021-12-09T13:56:36.460000',
                        's': 'BTCUSDT',
                        'stp': 0.0,
                        'crt': datetime.datetime(2021, 12, 9, 13, 56, 36, 458000, tzinfo=datetime.timezone.utc),
                        't': 'limit',
                        'exc': 'limit',
                        'ss': 'btcusdt',
                    }
                ],
            }
        }
    ],
    OrderSchema.margin_coin: [
        {
            'order': {
                'acc': 'tbinance.tbinance_margin',
                'tb': 'order',
                'sch': 'margin_coin',
                'act': 'insert',
                'd': [
                    {
                        'eoid': '229157580',
                        'sd': 0,
                        'ps': PositionSide.both,
                        'tv': 0.0,
                        'tp': 0.0,
                        'vl': 1.0,
                        'p': 49400.8,
                        'st': 'pending',
                        'lv': 1.0,
                        'fv': 0.0,
                        'ap': 0.0,
                        'tm': '2021-12-09T13:59:54.219000',
                        's': 'BTCUSD_PERP',
                        'stp': 0.0,
                        'crt': datetime.datetime(2021, 12, 9, 13, 59, 54, 216000, tzinfo=datetime.timezone.utc),
                        't': 'limit',
                        'exc': 'limit',
                        'ss': 'btcusd',
                    }
                ],
            }
        }
    ],
}
